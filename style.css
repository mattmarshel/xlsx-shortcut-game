/* ======================================
   EXCEL SHORTCUT MASTER — STYLES
   Excel-Inspired Green Theme
   ====================================== */

:root {
    --bg: #F7F9F5;
    --surface: #FFFFFF;
    --surface-2: #F0F4EC;
    --surface-3: #E2E8DB;
    --border: #C8D4BE;
    --border-light: #D6DFD0;
    --text: #1A2412;
    --text-dim: #4A5A3E;
    --text-muted: #8A9A7E;
    --accent: #217346;
    --accent-light: #2B9A5E;
    --accent-pale: #E6F4EC;
    --accent-glow: rgba(33, 115, 70, 0.15);
    --accent-dark: #185A36;
    --green: #217346;
    --green-glow: rgba(33, 115, 70, 0.12);
    --red: #C62828;
    --red-glow: rgba(198, 40, 40, 0.08);
    --orange: #E07A20;
    --orange-glow: rgba(224, 122, 32, 0.08);
    --blue: #1565C0;
    --blue-glow: rgba(21, 101, 192, 0.08);
    --teal: #00796B;
    --purple: #5E35B1;
    --radius: 14px;
    --radius-sm: 10px;
    --radius-xs: 6px;
    --shadow: 0 2px 12px rgba(20, 60, 30, 0.06);
    --shadow-lg: 0 8px 32px rgba(20, 60, 30, 0.10);
    --transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
    line-height: 1.6;
}

/* Ambient blobs — soft green tones */
.bg-blob {
    position: fixed;
    border-radius: 50%;
    filter: blur(140px);
    opacity: 0.15;
    pointer-events: none;
    z-index: 0;
}
.blob-1 { width: 600px; height: 600px; background: #217346; top: -200px; left: -200px; animation: blobFloat1 20s ease-in-out infinite; }
.blob-2 { width: 500px; height: 500px; background: #4CAF50; bottom: -150px; right: -150px; animation: blobFloat2 25s ease-in-out infinite; }
.blob-3 { width: 400px; height: 400px; background: #81C784; top: 50%; left: 50%; transform: translate(-50%, -50%); animation: blobFloat3 18s ease-in-out infinite; }

@keyframes blobFloat1 { 0%,100%{transform:translate(0,0) scale(1)} 33%{transform:translate(80px,60px) scale(1.1)} 66%{transform:translate(-40px,80px) scale(.95)} }
@keyframes blobFloat2 { 0%,100%{transform:translate(0,0) scale(1)} 33%{transform:translate(-60px,-40px) scale(1.05)} 66%{transform:translate(40px,-60px) scale(.9)} }
@keyframes blobFloat3 { 0%,100%{transform:translate(-50%,-50%) scale(1)} 50%{transform:translate(-45%,-55%) scale(1.15)} }

#app { max-width: 900px; margin: 0 auto; padding: 0 20px 60px; position: relative; z-index: 1; }

/* ===== HEADER ===== */
.app-header { display:flex; align-items:center; justify-content:space-between; padding:24px 0 16px; flex-wrap:wrap; gap:12px; }
.logo { display:flex; align-items:center; gap:12px; }
.logo-icon { width:44px; height:44px; background:linear-gradient(135deg,#185A36,#217346); border-radius:12px; display:flex; align-items:center; justify-content:center; color:white; box-shadow:0 4px 16px var(--accent-glow); }
.logo h1 { font-size:1.4rem; font-weight:800; letter-spacing:-0.5px; color:var(--text); }
.logo h1 span { color:var(--accent); }
.header-stats { display:flex; gap:10px; flex-wrap:wrap; }
.stat-pill { display:flex; align-items:center; gap:6px; background:var(--surface); border:1px solid var(--border); padding:8px 14px; border-radius:50px; font-size:.8rem; color:var(--text-dim); box-shadow:var(--shadow); }
.stat-pill svg { color:var(--accent); flex-shrink:0; }
.stat-pill strong { color:var(--text); }

/* ===== NAVIGATION ===== */
.mode-nav { display:flex; gap:4px; background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:5px; margin-bottom:32px; overflow-x:auto; box-shadow:var(--shadow); }
.nav-btn { flex:1; display:flex; align-items:center; justify-content:center; gap:8px; padding:12px 16px; border:none; background:transparent; color:var(--text-dim); font-size:.85rem; font-weight:500; border-radius:var(--radius-sm); cursor:pointer; transition:var(--transition); white-space:nowrap; font-family:inherit; }
.nav-btn:hover { color:var(--text); background:var(--surface-2); }
.nav-btn.active { background:var(--accent); color:white; box-shadow:0 2px 12px var(--accent-glow); }
.nav-btn svg { flex-shrink:0; }

/* ===== VIEWS ===== */
.view { display:none; animation:fadeIn .3s ease; }
.view.active { display:block; }
@keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }
.view-header { margin-bottom:32px; }
.view-header h2 { font-size:1.6rem; font-weight:800; letter-spacing:-0.5px; margin-bottom:6px; color:var(--text); }
.view-header p { color:var(--text-dim); font-size:.95rem; }

/* ===== DASHBOARD ===== */
.dashboard-hero { text-align:center; padding:40px 20px 32px; }
.dashboard-hero h2 { font-size:2rem; font-weight:900; letter-spacing:-1px; color:var(--accent); margin-bottom:8px; }
.dashboard-hero p { color:var(--text-dim); font-size:1rem; }

.progress-overview { display:flex; align-items:center; justify-content:center; gap:48px; background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:36px; margin-bottom:32px; flex-wrap:wrap; box-shadow:var(--shadow); }
.progress-ring-container { position:relative; width:160px; height:160px; }
.progress-ring-bg { stroke:var(--surface-3); }
.progress-ring-fill { stroke:url(#progressGradient); stroke-linecap:round; transform:rotate(-90deg); transform-origin:center; transition:stroke-dashoffset .8s cubic-bezier(.4,0,.2,1); }
.progress-ring-text { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; }
.progress-percent { display:block; font-size:2rem; font-weight:900; letter-spacing:-1px; color:var(--accent); }
.progress-label { font-size:.75rem; color:var(--text-dim); text-transform:uppercase; letter-spacing:1px; }
.progress-details { display:flex; flex-direction:column; gap:16px; }
.detail-row { display:flex; align-items:center; gap:12px; font-size:.95rem; }
.detail-row strong { margin-left:auto; min-width:30px; text-align:right; }
.detail-dot { width:12px; height:12px; border-radius:50%; }
.detail-dot.new { background:var(--border); }
.detail-dot.learning { background:var(--orange); }
.detail-dot.mastered-dot { background:var(--green); }

/* Mode cards */
.dashboard-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(190px,1fr)); gap:16px; margin-bottom:40px; }
.mode-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:28px 20px; text-align:center; cursor:pointer; transition:var(--transition); font-family:inherit; color:var(--text); box-shadow:var(--shadow); }
.mode-card:hover { border-color:var(--accent); transform:translateY(-4px); box-shadow:var(--shadow-lg),0 0 20px var(--accent-glow); }
.mode-card-icon { width:56px; height:56px; border-radius:16px; display:flex; align-items:center; justify-content:center; margin:0 auto 16px; }
.learn-icon { background:linear-gradient(135deg,#185A36,#2B9A5E); color:white; }
.practice-icon { background:linear-gradient(135deg,#1565C0,#42A5F5); color:white; }
.quiz-icon { background:linear-gradient(135deg,#E07A20,#FFB74D); color:white; }
.speed-icon { background:linear-gradient(135deg,#C62828,#EF5350); color:white; }
.mode-card h3 { font-size:1.05rem; font-weight:700; margin-bottom:6px; }
.mode-card p { font-size:.8rem; color:var(--text-dim); line-height:1.4; }

/* Category chips */
.category-filter-section { margin-bottom:36px; }
.category-filter-section h3 { font-size:1.1rem; font-weight:700; margin-bottom:14px; }
.category-chips { display:flex; flex-wrap:wrap; gap:8px; }
.category-chip { padding:8px 16px; border:1px solid var(--border); border-radius:50px; font-size:.8rem; font-weight:500; background:var(--surface); color:var(--text-dim); cursor:pointer; transition:var(--transition); font-family:inherit; }
.category-chip:hover,.category-chip.active { background:var(--accent); color:white; border-color:var(--accent); }

/* Shortcuts table */
.all-shortcuts-table { margin-bottom:32px; }
.all-shortcuts-table h3 { font-size:1.1rem; font-weight:700; margin-bottom:14px; }
.search-bar { display:flex; align-items:center; gap:10px; background:var(--surface); border:1px solid var(--border); border-radius:var(--radius-sm); padding:12px 16px; margin-bottom:16px; transition:var(--transition); }
.search-bar:focus-within { border-color:var(--accent); box-shadow:0 0 0 3px var(--accent-glow); }
.search-bar svg { color:var(--text-muted); flex-shrink:0; }
.search-bar input { flex:1; background:none; border:none; outline:none; color:var(--text); font-size:.9rem; font-family:inherit; }
.search-bar input::placeholder { color:var(--text-muted); }
.table-wrapper { overflow-x:auto; border-radius:var(--radius); border:1px solid var(--border); box-shadow:var(--shadow); }
table { width:100%; border-collapse:collapse; font-size:.85rem; background:var(--surface); }
thead { background:var(--accent); }
th { padding:14px 16px; text-align:left; font-weight:600; color:white; font-size:.75rem; text-transform:uppercase; letter-spacing:.5px; border-bottom:1px solid var(--border); }
td { padding:12px 16px; border-bottom:1px solid var(--border); color:var(--text); }
tr:last-child td { border-bottom:none; }
tbody tr { transition:var(--transition); }
tbody tr:hover { background:var(--accent-pale); }
.shortcut-key { display:inline-block; background:#E6F4EC; border:1px solid #B8D8C5; padding:4px 10px; border-radius:6px; font-family:'SF Mono','Fira Code',monospace; font-size:.8rem; font-weight:600; color:var(--accent); white-space:nowrap; }
.status-badge { display:inline-block; padding:3px 10px; border-radius:50px; font-size:.7rem; font-weight:600; text-transform:uppercase; letter-spacing:.5px; }
.status-badge.new { background:#ECEFF1; color:#90A4AE; }
.status-badge.learning { background:#FFF3E0; color:var(--orange); }
.status-badge.mastered { background:#E6F4EC; color:var(--accent); }
.category-badge { display:inline-block; padding:3px 10px; border-radius:50px; font-size:.7rem; font-weight:500; background:var(--surface-2); color:var(--text-dim); }

/* Reset */
.reset-section { text-align:center; padding:20px 0; }
.btn-reset { padding:10px 24px; border:1px solid rgba(198,40,40,.3); border-radius:var(--radius-sm); background:transparent; color:var(--red); font-size:.85rem; font-weight:500; cursor:pointer; transition:var(--transition); font-family:inherit; }
.btn-reset:hover { background:var(--red-glow); border-color:var(--red); }

/* ===== FLASHCARD ===== */
.flashcard-area { display:flex; flex-direction:column; align-items:center; }
.flashcard-progress { display:flex; align-items:center; gap:14px; margin-bottom:24px; width:100%; max-width:520px; font-size:.85rem; color:var(--text-dim); }
.mini-progress-bar { flex:1; height:6px; background:var(--surface-3); border-radius:10px; overflow:hidden; }
.mini-progress-fill { height:100%; background:linear-gradient(90deg,var(--accent),#4CAF50); border-radius:10px; transition:width .4s ease; width:2%; }
.flashcard { width:100%; max-width:520px; height:380px; perspective:1200px; cursor:pointer; margin-bottom:24px; }
.flashcard-inner { width:100%; height:100%; position:relative; transition:transform .6s cubic-bezier(.4,0,.2,1); transform-style:preserve-3d; }
.flashcard-inner.flipped { transform:rotateY(180deg); }
.flashcard-front,.flashcard-back { position:absolute; width:100%; height:100%; backface-visibility:hidden; display:flex; flex-direction:column; align-items:center; justify-content:center; border-radius:var(--radius); padding:28px; text-align:center; }
.flashcard-front { background:var(--surface); border:1px solid var(--border); box-shadow:var(--shadow-lg); }
.flashcard-back { background:linear-gradient(145deg,#185A36,#217346); border:1px solid #185A36; transform:rotateY(180deg); box-shadow:var(--shadow-lg),0 0 40px var(--accent-glow); color:white; }
.card-label { font-size:.7rem; text-transform:uppercase; letter-spacing:2px; color:var(--text-muted); margin-bottom:12px; }
.flashcard-back .card-label { color:rgba(255,255,255,.6); }
.flashcard-front h3 { font-size:1.4rem; font-weight:700; }
.flashcard-back h3 { font-size:1.7rem; font-weight:800; color:white; font-family:'SF Mono','Fira Code',monospace; }
.card-hint { margin-top:16px; font-size:.8rem; color:var(--text-muted); }

.recall-buttons { display:flex; gap:12px; margin-bottom:20px; flex-wrap:wrap; justify-content:center; }
.recall-btn { display:flex; align-items:center; gap:8px; padding:12px 24px; border:1px solid var(--border); border-radius:var(--radius-sm); background:var(--surface); color:var(--text); font-size:.85rem; font-weight:600; cursor:pointer; transition:var(--transition); font-family:inherit; }
.recall-btn.hard:hover { border-color:var(--red); background:var(--red-glow); color:var(--red); }
.recall-btn.okay:hover { border-color:var(--orange); background:var(--orange-glow); color:var(--orange); }
.recall-btn.easy:hover { border-color:var(--accent); background:var(--accent-pale); color:var(--accent); }
.card-nav { display:flex; gap:12px; }

/* ===== VISUAL SCENE (Animated Illustrations) ===== */
.visual-container { display:flex; justify-content:center; margin-bottom:16px; }
.vis { width:280px; height:160px; background:white; border:2px solid #B8D8C5; border-radius:10px; position:relative; overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,.06); flex-shrink:0; }
.vis-title-bar { height:18px; background:linear-gradient(90deg,#185A36,#217346); display:flex; align-items:center; padding:0 8px; gap:4px; }
.vis-title-bar .dot { width:6px; height:6px; border-radius:50%; background:rgba(255,255,255,.4); }
.vis-title-bar .bar-text { font-size:7px; color:rgba(255,255,255,.8); margin-left:auto; font-weight:600; }
.vis-canvas { position:relative; width:100%; height:calc(100% - 18px); overflow:hidden; }

/* Shape primitives */
.vis-rect { position:absolute; border-radius:3px; transition:all .6s ease; }
.vis-circle { position:absolute; border-radius:50%; transition:all .6s ease; }
.vis-text { position:absolute; font-size:7px; font-family:'Inter',sans-serif; color:#333; white-space:nowrap; transition:all .6s ease; }
.vis-text-block { position:absolute; font-size:6px; line-height:1.4; font-family:'Inter',sans-serif; color:#555; transition:all .6s ease; }
.vis-line { position:absolute; height:1px; background:#999; transition:all .6s ease; }
.vis-dashed { position:absolute; border:1px dashed #aaa; transition:all .6s ease; }
.vis-arrow { position:absolute; font-size:10px; color:var(--accent); transition:all .6s ease; }
.vis-label { position:absolute; bottom:4px; right:6px; font-size:6px; color:#aaa; letter-spacing:.5px; text-transform:uppercase; font-weight:600; }
.vis-badge { position:absolute; font-size:6px; font-weight:700; color:white; background:var(--accent); padding:1px 5px; border-radius:3px; }
.vis-group-box { position:absolute; border:2px dashed var(--accent); border-radius:4px; transition:all .6s ease; opacity:0; }

/* ===== SPREADSHEET VISUAL ELEMENTS ===== */
.vis-cell { position:absolute; background:white; border:1px solid #C8D4BE; font-size:6px; display:flex; align-items:center; justify-content:center; font-family:'Inter',sans-serif; transition:all .6s ease; }
.vis-cell-header { position:absolute; background:#E6F4EC; border:1px solid #B8D8C5; font-size:6px; font-weight:600; color:var(--accent-dark); display:flex; align-items:center; justify-content:center; }
.vis-ribbon { position:absolute; left:0; right:0; height:22px; background:linear-gradient(180deg,#F0F4EC,#E2E8DB); border-bottom:1px solid #C8D4BE; display:flex; align-items:center; padding:0 6px; gap:4px; }
.vis-ribbon-btn { width:14px; height:12px; background:white; border:1px solid #C8D4BE; border-radius:2px; font-size:5px; display:flex; align-items:center; justify-content:center; color:#4A5A3E; }
.vis-formula-bar { position:absolute; left:0; right:0; height:14px; background:white; border-bottom:1px solid #C8D4BE; display:flex; align-items:center; padding:0 4px; font-size:5px; color:#4A5A3E; }
.vis-selection { position:absolute; border:2px solid var(--accent); pointer-events:none; transition:all .6s ease; }
.vis-tab { display:inline-block; padding:2px 8px; background:white; border:1px solid #C8D4BE; border-bottom:none; border-radius:3px 3px 0 0; font-size:5px; color:#4A5A3E; }
.vis-tab.active-tab { background:white; border-bottom:1px solid white; font-weight:600; color:var(--accent); }

/* ===== VISUAL ANIMATIONS ===== */

/* --- Clipboard / Basic --- */
@keyframes cellHighlight {
    0%,40% { background:white; }
    50%,90% { background:#E6F4EC; border-color:var(--accent); }
    100% { background:white; }
}
@keyframes cellCopy {
    0%,40% { border:2px dashed transparent; }
    50%,90% { border:2px dashed var(--accent); }
    100% { border:2px dashed transparent; }
}
@keyframes pasteAppear {
    0%,40% { opacity:0; transform:scale(.8); }
    50%,100% { opacity:1; transform:scale(1); }
}
@keyframes cutFade {
    0%,40% { opacity:1; color:#333; }
    50%,100% { opacity:.3; color:#aaa; }
}
@keyframes deleteContent {
    0%,40% { opacity:1; }
    50%,100% { opacity:0; }
}
@keyframes formulaBarType {
    0% { width:0; }
    100% { width:80px; }
}

/* --- Selection & Navigation --- */
@keyframes expandSelection {
    0%,40% { width:40px; height:20px; }
    50%,100% { width:120px; height:60px; }
}
@keyframes moveSelection {
    0%,40% { left:30px; top:30px; }
    50%,100% { left:120px; top:30px; }
}
@keyframes jumpToA1 {
    0%,40% { left:100px; top:60px; }
    50%,100% { left:20px; top:24px; }
}
@keyframes jumpToEnd {
    0%,40% { left:20px; top:24px; }
    50%,100% { left:180px; top:90px; }
}
@keyframes selectAll {
    0%,40% { width:40px; height:20px; opacity:.3; }
    50%,100% { width:200px; height:100px; opacity:.2; }
}

/* --- Formatting --- */
@keyframes boldToggle {
    0%,40% { font-weight:400; }
    50%,100% { font-weight:800; }
}
@keyframes italicToggle {
    0%,40% { font-style:normal; }
    50%,100% { font-style:italic; }
}
@keyframes underlineToggle {
    0%,40% { text-decoration:none; }
    50%,100% { text-decoration:underline; }
}
@keyframes cellFormatPop {
    0%,35% { opacity:0; transform:translateY(10px); }
    50%,90% { opacity:1; transform:translateY(0); }
    100% { opacity:0; transform:translateY(10px); }
}
@keyframes percentSign {
    0%,40% { content:'0.75'; }
    50%,100% { content:'75%'; }
}
@keyframes dollarSign {
    0%,40% { opacity:0; }
    50%,100% { opacity:1; }
}

/* --- Insert / Delete --- */
@keyframes insertAppear {
    0%,35% { opacity:0; transform:scale(.6); }
    50%,100% { opacity:1; transform:scale(1); }
}
@keyframes slideDown {
    0%,35% { transform:translateY(0); }
    50%,100% { transform:translateY(20px); }
}
@keyframes slideRight {
    0%,35% { transform:translateX(0); }
    50%,100% { transform:translateX(30px); }
}
@keyframes removeItem {
    0%,40% { opacity:1; transform:scale(1); }
    50%,100% { opacity:0; transform:scale(.6); }
}

/* --- Sheet tabs --- */
@keyframes tabSlideIn {
    0%,35% { opacity:0; transform:translateX(20px); }
    50%,100% { opacity:1; transform:translateX(0); }
}
@keyframes tabHighlight {
    0%,40% { background:white; }
    50%,90% { background:#E6F4EC; border-color:var(--accent); }
    100% { background:white; }
}

/* --- Ribbon toggle --- */
@keyframes ribbonHide {
    0%,40% { height:22px; opacity:1; }
    50%,100% { height:0; opacity:0; }
}
@keyframes ribbonShow {
    0%,40% { height:0; opacity:0; }
    50%,100% { height:22px; opacity:1; }
}

/* --- Dialog pop --- */
@keyframes dialogPop {
    0%,35% { opacity:0; transform:translate(-50%,-50%) scale(.7); }
    45%,85% { opacity:1; transform:translate(-50%,-50%) scale(1); }
    100% { opacity:0; transform:translate(-50%,-50%) scale(.7); }
}

/* --- Data / Filter --- */
@keyframes filterDrop {
    0%,40% { height:0; opacity:0; }
    50%,90% { height:40px; opacity:1; }
    100% { height:0; opacity:0; }
}
@keyframes sortArrow {
    0%,40% { transform:rotate(0deg); }
    50%,100% { transform:rotate(180deg); }
}
@keyframes sumFlash {
    0%,40% { color:#333; font-weight:400; }
    50%,100% { color:var(--accent); font-weight:700; }
}
@keyframes f4Toggle {
    0%,24% { content:'A1' }
    25%,49% { content:'$A$1' }
    50%,74% { content:'A$1' }
    75%,100% { content:'$A1' }
}

/* --- Zoom --- */
@keyframes zoomPulse {
    0%,40% { transform:scale(1); }
    50%,100% { transform:scale(1.25); }
}

/* Generic pulsing */
@keyframes visPulse {
    0%,100% { opacity:1; }
    50% { opacity:.4; }
}

/* All visual animations run 4s infinite */
.vis [style*="animation"] { animation-duration:4s; animation-timing-function:ease-in-out; animation-iteration-count:infinite; }

/* ===== PRACTICE ===== */
.practice-area { display:flex; flex-direction:column; align-items:center; }
.practice-score { display:flex; gap:20px; margin-bottom:28px; }
.score-item { display:flex; align-items:center; gap:8px; font-size:1.1rem; font-weight:700; }
.correct-score svg { color:var(--accent); }
.wrong-score svg { color:var(--red); }
.practice-prompt { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:28px 40px; text-align:center; margin-bottom:28px; width:100%; max-width:560px; box-shadow:var(--shadow); }
.prompt-label { font-size:.8rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; display:block; margin-bottom:10px; }
.practice-prompt h3,.quiz-question h3,.speed-prompt h3 { font-size:1.5rem; font-weight:800; }
.key-input-area { width:100%; max-width:560px; margin-bottom:16px; }
.key-display { background:var(--surface); border:2px solid var(--border); border-radius:var(--radius-sm); padding:20px; text-align:center; font-family:'SF Mono','Fira Code',monospace; font-size:1.3rem; font-weight:700; min-height:68px; display:flex; align-items:center; justify-content:center; transition:var(--transition); }
.key-display.listening { border-color:var(--accent); box-shadow:0 0 0 3px var(--accent-glow); }
.key-display.correct { border-color:var(--accent); box-shadow:0 0 0 3px var(--green-glow); color:var(--accent); }
.key-display.wrong { border-color:var(--red); box-shadow:0 0 0 3px var(--red-glow); color:var(--red); }
.key-placeholder { color:var(--text-muted); font-size:.9rem; font-weight:400; font-family:'Inter',sans-serif; }
.practice-feedback { min-height:28px; margin-bottom:16px; font-size:.9rem; font-weight:600; text-align:center; }
.practice-feedback.correct { color:var(--accent); }
.practice-feedback.wrong { color:var(--red); }
.practice-controls { display:flex; gap:12px; }

/* ===== QUIZ ===== */
.quiz-area { max-width:640px; margin:0 auto; }
.quiz-header-bar { display:flex; justify-content:space-between; margin-bottom:10px; font-size:.85rem; color:var(--text-dim); }
.quiz-progress-bar { height:6px; background:var(--surface-3); border-radius:10px; overflow:hidden; margin-bottom:32px; }
.quiz-progress-fill { height:100%; background:linear-gradient(90deg,var(--accent),#4CAF50); border-radius:10px; transition:width .4s ease; width:10%; }
.quiz-question { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:28px; text-align:center; margin-bottom:24px; box-shadow:var(--shadow); }
.quiz-options { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:20px; }
.quiz-option { padding:16px 20px; border:1px solid var(--border); border-radius:var(--radius-sm); background:var(--surface); color:var(--text); font-family:'SF Mono','Fira Code',monospace; font-size:.9rem; font-weight:600; cursor:pointer; transition:var(--transition); text-align:center; box-shadow:var(--shadow); }
.quiz-option:hover:not(.disabled) { border-color:var(--accent); background:var(--accent-pale); transform:translateY(-2px); }
.quiz-option.selected-correct { border-color:var(--accent); background:var(--accent-pale); color:var(--accent); }
.quiz-option.selected-wrong { border-color:var(--red); background:var(--red-glow); color:var(--red); }
.quiz-option.reveal-correct { border-color:var(--accent); background:var(--accent-pale); color:var(--accent); }
.quiz-option.disabled { cursor:default; opacity:.7; }
.quiz-next-btn { width:100%; }

/* Quiz results */
.quiz-results { display:flex; justify-content:center; }
.results-card { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:48px 40px; text-align:center; max-width:500px; width:100%; box-shadow:var(--shadow-lg); }
.results-icon { margin-bottom:20px; }
.results-icon svg { color:var(--accent); }
.results-card h3 { font-size:1.6rem; font-weight:800; margin-bottom:8px; }
.results-card>p { color:var(--text-dim); margin-bottom:28px; }
.results-stats { display:flex; justify-content:center; gap:32px; margin-bottom:28px; }
.result-stat { display:flex; flex-direction:column; align-items:center; }
.result-stat-num { font-size:2rem; font-weight:900; color:var(--accent); }
.result-stat-label { font-size:.75rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:.5px; }
.results-missed { margin-bottom:24px; text-align:left; }
.results-missed h4 { font-size:.85rem; color:var(--text-dim); margin-bottom:10px; }
.missed-item { display:flex; justify-content:space-between; align-items:center; padding:10px 14px; background:var(--surface-2); border-radius:var(--radius-xs); margin-bottom:6px; font-size:.85rem; }
.missed-item .shortcut-key { font-size:.75rem; }

/* ===== SPEED RUN ===== */
.speed-area { display:flex; flex-direction:column; align-items:center; }
.speed-pre { text-align:center; padding:60px 20px; }
.speed-best { display:flex; flex-direction:column; align-items:center; margin-bottom:32px; }
.speed-best span { font-size:.85rem; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; }
.speed-best strong { font-size:3rem; font-weight:900; color:var(--accent); }
.speed-game { width:100%; max-width:640px; }
.speed-hud { display:flex; justify-content:space-between; align-items:center; margin-bottom:28px; }
.speed-timer { font-size:2.5rem; font-weight:900; font-variant-numeric:tabular-nums; color:var(--text); transition:color .3s; }
.speed-timer.warning { color:var(--orange); }
.speed-timer.danger { color:var(--red); animation:pulse .5s ease infinite alternate; }
@keyframes pulse { from{opacity:1} to{opacity:.5} }
.speed-score { font-size:1.2rem; color:var(--text-dim); }
.speed-score strong { color:var(--accent); font-size:1.4rem; }
.speed-prompt { background:var(--surface); border:1px solid var(--border); border-radius:var(--radius); padding:24px; text-align:center; margin-bottom:20px; box-shadow:var(--shadow); }
.speed-options { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.speed-option { padding:16px; border:1px solid var(--border); border-radius:var(--radius-sm); background:var(--surface); color:var(--text); font-family:'SF Mono','Fira Code',monospace; font-size:.9rem; font-weight:600; cursor:pointer; transition:all .15s ease; text-align:center; }
.speed-option:hover { border-color:var(--accent); background:var(--accent-pale); }
.speed-option.flash-correct { border-color:var(--accent); background:var(--accent-pale); color:var(--accent); }
.speed-option.flash-wrong { border-color:var(--red); background:var(--red-glow); color:var(--red); }
.speed-results .results-card { padding:48px 40px; }
.speed-final-score { display:flex; flex-direction:column; align-items:center; margin:20px 0; }
.big-score { font-size:4rem; font-weight:900; color:var(--accent); }
.speed-final-score span:last-child { color:var(--text-dim); font-size:.9rem; }
.new-best-text { color:var(--orange); font-weight:700; font-size:1.1rem; margin-bottom:20px; animation:pulse .6s ease infinite alternate; }

/* ===== BUTTONS ===== */
.btn-primary { padding:14px 32px; border:none; border-radius:var(--radius-sm); background:linear-gradient(135deg,#185A36,#217346); color:white; font-size:.9rem; font-weight:700; cursor:pointer; transition:var(--transition); font-family:inherit; box-shadow:0 4px 16px var(--accent-glow); }
.btn-primary:hover { transform:translateY(-2px); box-shadow:0 6px 24px var(--accent-glow); }
.btn-large { padding:18px 48px; font-size:1.05rem; }
.btn-secondary { padding:12px 24px; border:1px solid var(--border); border-radius:var(--radius-sm); background:var(--surface); color:var(--text); font-size:.85rem; font-weight:600; cursor:pointer; transition:var(--transition); font-family:inherit; }
.btn-secondary:hover { border-color:var(--accent); background:var(--accent-pale); }

/* ===== RESPONSIVE ===== */
@media (max-width:640px) {
    .app-header { flex-direction:column; align-items:flex-start; }
    .mode-nav { overflow-x:auto; -webkit-overflow-scrolling:touch; }
    .nav-btn span { display:none; }
    .nav-btn { padding:12px; }
    .dashboard-hero h2 { font-size:1.5rem; }
    .progress-overview { flex-direction:column; gap:24px; padding:24px; }
    .dashboard-grid { grid-template-columns:1fr 1fr; }
    .quiz-options,.speed-options { grid-template-columns:1fr; }
    .flashcard { height:340px; }
    .recall-buttons { gap:8px; }
    .recall-btn { padding:10px 16px; font-size:.8rem; }
    .vis { width:240px; height:140px; }
}

/* Scrollbar */
::-webkit-scrollbar { width:6px; height:6px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--border); border-radius:10px; }
::-webkit-scrollbar-thumb:hover { background:var(--text-muted); }
::selection { background:var(--accent); color:white; }
